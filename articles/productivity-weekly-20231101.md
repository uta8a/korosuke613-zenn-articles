---
title: "ï¼œã“ã“ã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ï¼ï¼šProductivity Weekly (2023-11-01å·)"
emoji: "ğŸ´"
type: "idea"
topics: ["ProductivityWeekly", "ç”Ÿç”£æ€§å‘ä¸Š"]
published: false
publication_name: "cybozu_ept"
user_defined: {"publish_link": "https://zenn.dev/korosuke613/articles/productivity-weekly-20231101"}
---

ã“ã‚“ã«ã¡ã¯ã€‚ã‚µã‚¤ãƒœã‚¦ã‚ºæ ªå¼ä¼šç¤¾ [ç”Ÿç”£æ€§å‘ä¸Šãƒãƒ¼ãƒ ](https://note.com/cybozu_dev/n/n1c1b44bf72f6)ã®å¹³æœ¨å ´ã§ã™ã€‚

åƒ•ãŸã¡ç”Ÿç”£æ€§å‘ä¸Šãƒãƒ¼ãƒ ã¯æ¯é€±æ°´æ›œæ—¥ã« Productivity Weekly ã¨ã„ã†ã€Œ1 é€±é–“ã®é–“ã«ç™ºè¦‹ã•ã‚ŒãŸé–‹ç™ºè€…ã®ç”Ÿç”£æ€§å‘ä¸Šã«é–¢ã™ã‚‹ãƒã‚¿ã‚’å…±æœ‰ã™ã‚‹ä¼šã€ã‚’ç¤¾å†…ã§é–‹å‚¬ã—ã¦ã„ã¾ã™ã€‚
æœ¬è¨˜äº‹ã¯ãã®æ™‚ã®ãƒã‚¿ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚


2023-01-25 å·ã‹ã‚‰ã€åŸºæœ¬çš„ã«éš”é€±ã§é€£è¼‰ã™ã‚‹ã“ã¨ã¨ã—ã¾ã—ãŸã€‚ãŸã¾ã«å˜ç‹¬ã§ã‚‚æŠ•ç¨¿ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ä»Šé€±ã¯ 2023-11-01 å˜ç‹¬å·ã§ã™ã€‚

ä»Šå›ãŒç¬¬ 131 å›ç›®ã§ã™ã€‚éå»ã®è¨˜äº‹ã¯[ã“ã¡ã‚‰](https://zenn.dev/topics/productivityweekly?order=latest)ã€‚

:::message
2023-05-10 å·ã‹ã‚‰ã€å®Ÿé¨“çš„ã«ç”Ÿç”£æ€§å‘ä¸Šãƒãƒ¼ãƒ ã®ä»–ãƒ¡ãƒ³ãƒãƒ¼ã«ã„ãã¤ã‹ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’ç´¹ä»‹ã—ã¦ã„ãŸã ãã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚

å¯¾è±¡ã®ãƒˆãƒ”ãƒƒã‚¯ã§ã¯ã€æ–‡ç« ã®æœ€å¾Œã« `æœ¬é …ã®åŸ·ç­†è€…: <åŸ·ç­†è€…å>` ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

ä»Šé€±ã®å…±åŒè‘—è€…ã¯æ¬¡ã®æ–¹ã§ã™ã€‚
- [@korosuke613](https://zenn.dev/korosuke613)
- [@defaultcf](https://zenn.dev/defaultcf)
- [@Kesin11](https://zenn.dev/kesin11)
- [@r4mimu](https://zenn.dev/r4mimu)
- [@uta8a](https://zenn.dev/uta8a)

:::

# news ğŸ“º

## Accelerate your CI/CD with Arm-based hosted runners in GitHub Actions - The GitHub Blog
https://github.blog/changelog/2023-10-30-accelerate-your-ci-cd-with-arm-based-hosted-runners-in-github-actions/

## Run your ML workloads on GitHub Actions with GPU runners - The GitHub Blog
https://github.blog/changelog/2023-10-31-run-your-ml-workloads-on-github-actions-with-gpu-runners/


## Serverless Framework V4: A New Model
https://www.serverless.com/blog/serverless-framework-v4-a-new-model

ä»Šå¾Œãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ Serverless Framework v4 ã®ç´¹ä»‹è¨˜äº‹ã§ã™ã€‚Serverless Framework v4 ã§äºˆå®šã—ã¦ã„ã‚‹ã“ã¨ãŒè¼‰ã£ã¦ã„ã¾ã™ã€‚

- ç ´å£Šçš„å¤‰æ›´ç„¡ã—
- FaaS ã¨ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã‚’ç°¡å˜ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹
- æ–°ãŸã« Serverless Framework ã‚’æ‹¡å¼µã™ã‚‹ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãŒç™»å ´
- é‡è¦ãªã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«ã¯å ±é…¬ãŒæ”¯æ‰•ã‚ã‚Œã‚‹
- å¹´é–“åç›ŠãŒ 200 ä¸‡ãƒ‰ãƒ«ã‚’è¶…ãˆã‚‹çµ„ç¹”ã§åˆ©ç”¨ã™ã‚‹å ´åˆã¯æœ‰æ–™ã«ãªã‚‹
- æ–°ã—ã„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æä¾›

è‰²ã€…æ°—ã«ãªã‚‹ãƒˆãƒ”ãƒƒã‚¯ã¯ã‚ã‚Šã¾ã™ãŒã€ç‰¹ã«åˆ©ç”¨è€…ã«å½±éŸ¿ãŒã‚ã‚‹ã®ã¯å¹´é–“åç›ŠãŒ 200 ä¸‡ãƒ‰ãƒ«ã‚’è¶…ãˆã‚‹çµ„ç¹”ã§åˆ©ç”¨ã™ã‚‹å ´åˆã¯æœ‰æ–™ã¨ãªã‚‹ç‚¹ã§ã™ã€‚
ï¼ˆã€ŒFaaS ã¨ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã‚’ç°¡å˜ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã€ã®éƒ¨åˆ†ã¯è©³ç´°ãŒæ°—ã«ãªã‚‹ã¨ã“ã‚ã§ã™ãŒã€ã¾ã è©³ç´°ã¯ç™ºè¡¨ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯é›‘ã«è¨€ã†ã¨ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã£ã½ã„ï¼‰

> **New Fee Structure**: For organizations with annual revenue exceeding $2M, we're introducing some fees that apply to V.4 and beyond. We're a small team. We need to fuel further innovation, and this is a step in that direction. This also helps kick-start a new ecosystem.

ä»Šå¾Œã®ä¾¡æ ¼å¤‰æ›´ã«ã¤ã„ã¦ã¯è©³ç´°ã«è‰²ã€…è¼‰ã£ã¦ã„ã¾ã™ï¼ˆãŸã ã—å…·ä½“çš„ãªè¨ˆç®—æ–¹æ³•ã¯ã¾ã ï¼‰ã€‚

- v3 ã¯ç„¡æ–™ã®ã¾ã¾
- v3 ã¯ 2024 å¹´ã¾ã§ä¿å®ˆãŒç¶™ç¶šã•ã‚Œã‚‹
- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®æ•°ã«å¿œã˜ã¦æ®µéšçš„ã«æ–™é‡‘ãŒè¨­å®šã•ã‚Œã‚‹
  - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸ Serverless Framework ã‚’æŒ‡ã™ï¼ˆAWS ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ IDã€serviceã€stageã€region ã®ã‚»ãƒƒãƒˆï¼‰
    - å½“æœˆå†…ã§ 5 æ—¥ä»¥ä¸Šãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸçŠ¶æ…‹ã«ã‚ã‚‹å ´åˆã®ã¿é©ç”¨
  - ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¯ v4 ã‹ã‚‰ã®æ–°ã—ã„æ¦‚å¿µ
- æœ€ä½ã®æœˆé¡æ–™é‡‘ã¯ $49 ã‹ã‚‰
- ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒæä¾›ã•ã‚Œã‚‹

ã¾ã å®Ÿéš›ã« v4 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã‚ã‘ã§ã¯ãªã„ã®ã§ã€è¨˜äº‹ã«è¼‰ã£ã¦ã„ã‚‹å†…å®¹ã¯å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã€å…·ä½“çš„ãªèª²é‡‘ã®è¨ˆç®—æ–¹æ³•ãŒä¸æ˜ç­ã§ã‚ã‚‹ãªã©ã€ä»Šå¾Œæ–°ãŸãªæƒ…å ±ãŒå‡ºã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã¾ã™ã€‚
æ–™é‡‘è¨ˆç®—ãŒé¢å€’ã«ãªã‚‹ãªã‚‰äººç‚ºçš„ã‚³ã‚¹ãƒˆã‚’æ¸›ã‚‰ã™ãŸã‚ã«ä»–ã®ãƒ„ãƒ¼ãƒ«ã«ç§»è¡Œã™ã‚‹ã‚„ã€v3 ã‚’ç‹¬è‡ªã«ä¿å®ˆã™ã‚‹ã¨ã„ã†é¸æŠè‚¢ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚

èº«æ§‹ãˆã¤ã¤ v4 ã®ãƒªãƒªãƒ¼ã‚¹ã‚’ãŠç¥ã„ã—ãŸã„ã§ã™ã€‚

_æœ¬é …ã®åŸ·ç­†è€…: [@korosuke613](https://zenn.dev/korosuke613)_

## Requiring workflows with rulesets now supports the pull_request_target trigger - The GitHub Blog
https://github.blog/changelog/2023-10-26-requiring-workflows-with-rulesets-now-supports-the-pull_request_target-trigger/

## Dependabot user-defined rules for security updates and alerts; enforcement of auto-triage rules and presets for organizations (public beta) - The GitHub Blog
https://github.blog/changelog/2023-10-26-dependabot-user-defined-rules-for-security-updates-and-alerts-enforcement-of-auto-triage-rules-and-presets-for-organizations-public-beta/

## Introducing HAR Sanitizer: secure HAR sharing
https://blog.cloudflare.com/introducing-har-sanitizer-secure-har-sharing/

## Announcing remote cache support in Amazon ECR for BuildKit clients | Containers
https://aws.amazon.com/jp/blogs/containers/announcing-remote-cache-support-in-amazon-ecr-for-buildkit-clients/

ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥å…ˆã« ECR ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä¾‹ãˆã° CI ç’°å¢ƒã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã« ECR ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥å…ˆã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’çŸ­ç¸®ã§ãã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

Docker ã‚„ Finch ãªã©ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã«ã¯ buildkit ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚buildkit ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«ä¿å­˜å¯èƒ½[^inline_cache]ã«ãªã£ãŸã®ã‚‚æ¯”è¼ƒçš„æœ€è¿‘ã§ã™ãŒã€GitHub Container Registry ãªã©ã§ã¯æ—¢ã«å¯¾å¿œæ¸ˆã¿ã§ã‚ã£ãŸã‚‚ã®ã® ECR ã¯æœªå¯¾å¿œã ã£ãŸãŸã‚å¯¾å¿œã‚’æœ›ã‚€ [issue](https://github.com/aws/containers-roadmap/issues/876) ãŒä»¥å‰ã‹ã‚‰å­˜åœ¨ã—ã¦ã„ã¾ã—ãŸã€‚ECR ã‚’å¯¾å¿œã•ã›ã‚‹ãŸã‚ã« buildkit å´ã«ã‚‚ä¿®æ­£ãŒå¿…è¦ã ã£ãŸã‚ˆã†ã§ã€Buildkit ã®æ¯”è¼ƒçš„æ–°ã—ã„ v0.12 ãŒå¿…è¦ã§ã™ã€‚ã§ã™ãŒã€GitHub Actions ã§ `docker/setup-buildx-action@v3` ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ latest ã® Buildkit ãŒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ã®ã§ã»ã¼å•é¡Œãªã„ã¯ãšã§ã™ã€‚

[^inline_cache]: ä¸€æ™‚æœŸæµè¡Œã£ãŸ `BUILDKIT_INLINE_CACHE=1` ã«ã‚ˆã‚‹ inline cache ã¨ã¯åˆ¥ç‰©ã§ã™ã€‚inline cache ã¯ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã§ã¯ã‚ã¾ã‚Šæœ‰ç”¨ã§ã¯ãªã„ãŸã‚ã€Dockerfile ãŒè¤‡é›‘åŒ–ã—ãŒã¡ãªæ˜¨ä»Šã§ã¯ `--cache-to=type=registy` ã«ã‚ˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ–¹ãŒæœ‰ç”¨ãªã‚±ãƒ¼ã‚¹ãŒå¤šã„ã§ã™ï¼ˆå‚è€ƒ: [Inline cache](https://docs.docker.com/build/cache/backends/inline/)ï¼‰

è¨˜äº‹ä¸­ã« `docker build` ã‚³ãƒãƒ³ãƒ‰ã‚‚ã‚µãƒ³ãƒ—ãƒ«ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€è‡ªåˆ†ã§ã‚‚è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

:::details ECR ã¸ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Ÿé¨“ã—ã¦ã¿ãŸã€‚

ã¾ãšã¾ã£ã•ã‚‰ãª buildkit ã‚’ buildx ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

```bash
# buildxã§ä½¿ç”¨ã™ã‚‹buildkitã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ç”¨æ„
$ docker buildx create --use --bootstrap --name=container_builder

# buildkit v0.12.3ãŒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª 
$ docker buildx ls
NAME/NODE            DRIVER/ENDPOINT  STATUS  BUILDKIT        PLATFORMS
container_builder *  docker-container
  container_builder0 rancher-desktop  running v0.12.3         linux/arm64
default                               error
rancher-desktop      docker
  rancher-desktop    rancher-desktop  running v0.10.6+d52b2d5 linux/arm64
```

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½“æ„Ÿã™ã‚‹ãŸã‚ã«ã‚ã‚‹ç¨‹åº¦è¤‡é›‘ãª Dockerfile ã¨ã—ã¦ [actions/runner](https://github.com/actions/runner) ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã™ã€‚

```bash
$ time docker buildx build \
  -f images/Dockerfile \
  --platform=linux/arm64 \
  --build-arg RUNNER_VERSION=2.311.0 \
  --progress=plain \
  -t actions_runner \
  .

# ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã¯çœç•¥
real	0m32.814s
user	0m0.185s
sys	0m0.154s
```

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ã®çŠ¶æ…‹ã ã¨å¤§ä½“ 30 ç§’ãã‚‰ã„ã§ã—ãŸã€‚æ¬¡ã«è¨˜äº‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒãƒ³ãƒ‰ã®ã‚ˆã†ã« `--cache-to` ã¨ `--cache-from` ã‚’è¿½åŠ ã—ã¾ã™ã€‚è¨˜äº‹ã®å†…å®¹ã‚’è¦‹ã‚‹ã« `image-manifest=true,oci-mediatypes=true` ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ ãŒä»Šå›ã® ECR å¯¾å¿œã§é‡è¦ãªã‚ˆã†ãªã®ã§ã“ã‚Œã‚‚å¿˜ã‚Œãšã«ä»˜ä¸ã—ã¾ã™ã€‚

```bash
time docker buildx build \
  -f images/Dockerfile \
  --platform=linux/arm64 \
  --build-arg RUNNER_VERSION=2.311.0 \
  --progress=plain \
  -t actions_runner \
  --cache-to mode=max,image-manifest=true,oci-mediatypes=true,type=registry,ref=568211859639.dkr.ecr.ap-northeast-1.amazonaws.com/test_actions_runner_registry_cache:latest \
  --cache-from type=registry,ref=568211859639.dkr.ecr.ap-northeast-1.amazonaws.com/test_actions_runner_registry_cache:latest \
  .

...çœç•¥
#17 [stage-1 7/7] RUN install -o root -g root -m 755 docker/* /usr/bin/ && rm -rf docker
#17 CACHED

#18 exporting cache to registry
#18 preparing build cache for export
#18 writing layer sha256:07e38af80e6b968767f997a2ecd8da3b748ed951e13a8bde4671c9904075c0c3
#18 writing layer sha256:07e38af80e6b968767f997a2ecd8da3b748ed951e13a8bde4671c9904075c0c3 0.5s done
#18 writing layer sha256:3b276d84631221acbfb60b0874fc465f467202c0f32511f4010fb142766a558a
#18 writing layer sha256:3b276d84631221acbfb60b0874fc465f467202c0f32511f4010fb142766a558a 4.7s done
#18 writing layer sha256:45126cbc69b8cc16e2438602e46fe9fbba6c68a1b575f9f8183de649cdd05416
#18 writing layer sha256:45126cbc69b8cc16e2438602e46fe9fbba6c68a1b575f9f8183de649cdd05416 2.6s done
#18 writing layer sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1
#18 writing layer sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1 0.4s done
#18 writing layer sha256:6fde64232a954738f9f20c8e7c99329300d65a8cb449d00d7f2b8e2fa5fd4025
#18 writing layer sha256:6fde64232a954738f9f20c8e7c99329300d65a8cb449d00d7f2b8e2fa5fd4025 12.6s done
#18 writing layer sha256:7839b2e96519022f83d121711517cdfa2c532d646b87229d8c3cb054fde47a86
#18 writing layer sha256:7839b2e96519022f83d121711517cdfa2c532d646b87229d8c3cb054fde47a86 0.4s done
#18 writing layer sha256:bd05a799608064489df0e5df198b4dae4c7e81e59517a99cd4a62936d13a92b8
#18 writing layer sha256:bd05a799608064489df0e5df198b4dae4c7e81e59517a99cd4a62936d13a92b8 1.3s done
#18 writing layer sha256:bfbe77e41a78ee38147c5761aa8bc896d9f6e1e648b23468f294065ffe03c107
#18 writing layer sha256:bfbe77e41a78ee38147c5761aa8bc896d9f6e1e648b23468f294065ffe03c107 3.3s done
#18 writing layer sha256:c0361b6de73548b79aaf2dc6a7692f02458a93fac9443631a27adf286df8c45e
#18 writing layer sha256:c0361b6de73548b79aaf2dc6a7692f02458a93fac9443631a27adf286df8c45e 2.1s done
#18 writing layer sha256:d7df41c61c08081c37036fa14aa0ffdbaa19dc4fec64dc7fca56ea08bb842e3c
#18 writing layer sha256:d7df41c61c08081c37036fa14aa0ffdbaa19dc4fec64dc7fca56ea08bb842e3c 6.3s done
#18 writing layer sha256:d9ba36b545b7658dc3040fa7e493880406b2fbe016d4e9c99ccec890b182edc6
#18 writing layer sha256:d9ba36b545b7658dc3040fa7e493880406b2fbe016d4e9c99ccec890b182edc6 0.6s done
#18 writing layer sha256:f8c41563db44116d108aac25f7bf0f3cba1b66d55e9908c36849cc58121a6ebc
#18 writing layer sha256:f8c41563db44116d108aac25f7bf0f3cba1b66d55e9908c36849cc58121a6ebc 7.6s done
#18 writing layer sha256:fb01bbeeb5b5818531215f4f7cf6f8738cf8a9ecfc5394e2749e4d3e701caa19
#18 writing layer sha256:fb01bbeeb5b5818531215f4f7cf6f8738cf8a9ecfc5394e2749e4d3e701caa19 3.8s done
#18 writing config sha256:fd46e3d764a2a32fe8a9d3da4557ddbbc336890a11dc539ccbb5cb416d2e9868
#18 writing config sha256:fd46e3d764a2a32fe8a9d3da4557ddbbc336890a11dc539ccbb5cb416d2e9868 0.5s done
#18 writing cache image manifest sha256:33f226dc320279b6b4663ae462e3110782105132f37e0fe3aa6d7163d1dc186a
#18 preparing build cache for export 47.2s done
#18 writing cache image manifest sha256:33f226dc320279b6b4663ae462e3110782105132f37e0fe3aa6d7163d1dc186a 0.4s done
#18 DONE 47.2s
------
 > importing cache manifest from 568211859639.dkr.ecr.ap-northeast-1.amazonaws.com/test_actions_runner_registry_cache:latest:
------
WARNING: No output specified with docker-container driver. Build result will only remain in the build cache. To push result image into registry use --push or to load image into docker use --load

real	0m48.142s
user	0m0.146s
sys	0m0.152s
```

ãƒ“ãƒ«ãƒ‰è‡ªä½“ã¯å…ˆã»ã©ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã‚‹ã®ã§å…¨éƒ¨ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«ä¿å­˜ã™ã‚‹ãŸã‚ã® push å‡¦ç†ã§æ™‚é–“ãŒã‹ã‹ã£ãŸã‚ˆã†ã§ã™ã€‚ã“ã‚Œè‡ªä½“ã¯ä»•æ–¹ãªã„ã§ã™ã­ã€‚

ã§ã¯ã„ã‚ˆã„ã‚ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨ã§ãã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚ã¾ãšã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«æ®‹ã£ã¦ã„ã‚‹æœ€åˆã«ãƒ“ãƒ«ãƒ‰ã—ãŸã¨ãã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ã€ãã®å¾Œã«åŒã˜ã‚³ãƒãƒ³ãƒ‰ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã™ã€‚

```
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤
$ docker buildx prune

time docker buildx build \
  -f images/Dockerfile \
  --platform=linux/arm64 \
  --build-arg RUNNER_VERSION=2.311.0 \
  --progress=plain \
  -t actions_runner \
  --cache-to mode=max,image-manifest=true,oci-mediatypes=true,type=registry,ref=568211859639.dkr.ecr.ap-northeast-1.amazonaws.com/test_actions_runner_registry_cache:latest \
  --cache-from type=registry,ref=568211859639.dkr.ecr.ap-northeast-1.amazonaws.com/test_actions_runner_registry_cache:latest \
  .

...çœç•¥
#17 [stage-1 7/7] RUN install -o root -g root -m 755 docker/* /usr/bin/ && rm -rf docker
#17 CACHED

#18 exporting cache to registry
...çœç•¥
#18 writing cache image manifest sha256:92e621cb79da052adde766a6fae517c6df19739e239d59d86bb6fcc83b3add62 0.2s done
#18 DONE 1.4s
WARNING: No output specified with docker-container driver. Build result will only remain in the build cache. To push result image into registry use --push or to load image into docker use --load

real	0m2.770s
user	0m0.107s
sys	0m0.092s
```

:::

æœ€å¾Œã®ãƒ­ã‚°ã§ã¯çœç•¥ã—ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€å…¨ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒ CACHED ã¨ãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã®ã§æ‰‹å…ƒã§ã¯ä¸€åˆ‡ãƒ“ãƒ«ãƒ‰å‡¦ç†ãŒèµ°ã£ã¦ã„ãªã„ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚time ã®çµæœã‚‚ 1 ç§’ã‚‚ã‹ã‹ã£ã¦ãŠã‚‰ãšã€ä½“æ„Ÿã§ã‚‚ã»ã¼ä¸€ç¬ã§ã—ãŸã€‚ãŸã—ã‹ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ ECR ã«èª­ã¿æ›¸ãã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã£ãŸã‚ˆã†ã§ã™ï¼

ã“ã®ã‚ˆã†ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ã™ã‚‹ã¨ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã‚‹å ´åˆã‚‚ã‚ã‚‹ãŸã‚ãœã²æ´»ç”¨ã—ã¦ã„ããŸã„ã§ã™ã­ã€‚ã¡ãªã¿ã« buildkit ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ã¾ã  experimental ã§ã¯ã‚ã‚Šã¾ã™ãŒ [S3](https://github.com/moby/buildkit?tab=readme-ov-file#s3-cache-experimental) ã‚„ [GitHub Actions ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥](https://github.com/moby/buildkit?tab=readme-ov-file#github-actions-cache-experimental) ãªã©ã«ã‚‚ä¿å­˜å¯èƒ½ãªã®ã§ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥å…ˆã¨ã—ã¦å¿…ãšã—ã‚‚ ECR ã®ã‚ˆã†ãªã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒªãŒå¿…è¦ã¨ã„ã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

_æœ¬é …ã®åŸ·ç­†è€…: [@Kesin11](https://zenn.dev/kesin11)_

# know-how ğŸ“

## Railsã‚¢ãƒ—ãƒªã®CIé«˜é€ŸåŒ–
https://r7kamura.com/articles/2023-10-31-rails-ci

## Four Keysã¨é–‹ç™ºç”Ÿç”£æ€§ã«ã¤ã„ã¦å–ã‚Šçµ„ã‚“ã§ããŸã“ã¨ - Chatwork Creator's Note
https://creators-note.chatwork.com/entry/four_keys_and_dev_productivity

## [ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]Google Cloudãƒªã‚½ãƒ¼ã‚¹ã‚’Terraformã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã¿ãŸã€‚(+Cloud Consoleã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹ã®HCLã‚’ç¢ºèªã™ã‚‹å°ãƒã‚¿) | DevelopersIO
https://dev.classmethod.jp/articles/202310_googlecloud_exporthcl/

# read more ğŸ˜
Productivity Weekly ã§å‡ºãŸãƒã‚¿ã‚’å…¨ã¦ç´¹ä»‹ã—ãŸã„ã‘ã©ç´¹ä»‹ã™ã‚‹ä½“åŠ›ãŒæŒãŸãªã‹ã£ãŸãƒã‚¿ã‚’ä¸€è¨€ç¨‹åº¦ã§æ›¸ãã‚³ãƒ¼ãƒŠãƒ¼ã§ã™ã€‚

- **news ğŸ“º**
- **know-how ğŸ“**
- **tool ğŸ”¨**

# ã‚ã¨ãŒã


ã‚µã‚¤ãƒœã‚¦ã‚ºã®ç”Ÿç”£æ€§å‘ä¸Šãƒãƒ¼ãƒ ã§ã¯ç¤¾å†…ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®é–‹ç™ºç”Ÿç”£æ€§ã‚’ä¸Šã’ã‚‹ãŸã‚ã®æ´»å‹•ã‚’è¡Œãªã£ã¦ã„ã¾ã™ã€‚ãã‚“ãªç”Ÿç”£æ€§å‘ä¸Šãƒãƒ¼ãƒ ãŒæ°—ã«ãªã‚‹æ–¹ã¯ä¸‹ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼
https://note.com/cybozu_dev/n/n1c1b44bf72f6

<!-- :::message ã™ã¿ã¾ã›ã‚“ã€ä»Šé€±ã‚‚ãŠã¾ã‘ã¯ãŠä¼‘ã¿ã§ã™...:::-->
